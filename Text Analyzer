import string
import pandas as pd

class TextAnalyzer:
    def __init__(self, text):
        try:
            if not isinstance(text, str):
                raise TypeError("Tekst musi być ciągiem znaków!")
            self.clean_text = text.translate(str.maketrans('', '', string.punctuation))
            self.fText = self.clean_text.lower().split()
            self.original_text = text
        except (AttributeError, TypeError) as e:
            print(f"Błąd: {e}")
           

    def freqAll(self):
        try:
            freq = {}
            for word in self.fText:
                freq[word] = freq.get(word, 0) + 1
            return pd.DataFrame(list(freq.items()), columns=['słowo', 'liczba_wystąpień'])
        except Exception as e:
            print(f"Błąd: {e}")
            return pd.DataFrame()

    def freqSpecWord(self, word):
        try:
            freq_df = self.freqAll()
            return freq_df[freq_df['słowo'] == word.lower()]['liczba_wystąpień'].iloc[0] if word.lower() in freq_df['słowo'].values else 0
        except Exception as e:
            print(f"Błąd: {e}")
            return 0

# Test
if __name__ == "__main__":
    try:
        givenstring = "Lorem ipsum dolor! diam amet, consetetur Lorem magna. sed diam nonumy eirmod tempor. diam et labore? et diam magna. et diam amet."
        analyzer = TextAnalyzer(givenstring)
        print("Oczyszczony tekst (lista słów):", analyzer.fText)
        print("\nCzęstotliwość wszystkich słów:\n", analyzer.freqAll())
        print("Częstotliwość słowa 'diam':", analyzer.freqSpecWord("diam"))
    except Exception as e:
        print(f"Błąd: {e}")
